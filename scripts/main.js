var _jsonData,_map,_featureLayer;$("form").on("submit",function(){"use strict";var e=document.getElementById("config").getElementsByTagName("textarea")[0].value,t=$("form select").val(),a=csv2json.dsv(t,"text/plain",1),o=a.parse(e);_jsonData=_.reduce(o,function(e,t,a){return e[a]=_.reduce(t,function(e,t,a){return e[a.toLowerCase().trim().replace(" ","_")]=t,e},{}),e},{}),$(".container").trigger("redrawTable.foundermap").trigger("redrawMap.foundermap"),$("#config").toggle()}),$(".container").on("redrawTable.foundermap",function(){"use strict";var e={company:_jsonData};document.getElementById("data").innerHTML=foundermap.templates.founderTable(e)}),$(".container").on("redrawMap.foundermap",function(){"use strict";L.mapbox.accessToken="pk.eyJ1IjoidGhpYmF1bHRtaWxhbiIsImEiOiJPTk5Sc1A0In0.cns6bkFRjcQfIfigb0uztg";var e=[];_.each(_jsonData,function(t){t.garage_latitude&&t.garage_longitude&&e.push({type:"Feature",geometry:{type:"Point",coordinates:[+t.garage_longitude,+t.garage_latitude]},properties:{title:t.company_name,description:t.street+", "+t.city,"marker-color":"#fc4353","marker-size":"medium","marker-symbol":"warehouse"}})}),document.getElementById("map").children.length<1&&(_map=L.mapbox.map("map","examples.map-i86nkdio")),_featureLayer=_map.featureLayer,_featureLayer.setGeoJSON(e),_map.fitBounds(_featureLayer.getBounds())}),$("#toggle-config").on("click",function(){"use strict";$("#config").toggle()}),_jsonData={0:{id:1,company_name:"Apple",founder:"Jobs S.",country:"USA",city:"Pao Alto",postal_code:"L 3456",street:"1 infinite loop",photo:"http://lorempixel.com/400/200/business",home_page:"http://apple.com",garage_latitude:37.3403188,garage_longitude:-122.0581469},1:{id:2,company_name:"Microsoft",founder:"Gates B.",country:"USA",city:"Somewhere",postal_code:"L 3456",street:"1 infinite loop",photo:"http://lorempixel.com/400/200/business",home_page:"http://microsoft.com",garage_latitude:37.472189,garage_longitude:-122.190191}},$(".container").trigger("redrawTable.foundermap").trigger("redrawMap.foundermap");